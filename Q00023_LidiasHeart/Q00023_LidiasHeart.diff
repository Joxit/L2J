### Eclipse Workspace Patch 1.0
#P L2J_DataPack_BETA
Index: dist/game/data/scripts.cfg
===================================================================
--- dist/game/data/scripts.cfg	(revision 9906)
+++ dist/game/data/scripts.cfg	(working copy)
@@ -234,7 +234,7 @@
 quests/Q00020_BringUpWithLove/Q00020_BringUpWithLove.java
 quests/Q00021_HiddenTruth/Q00021_HiddenTruth.java
 quests/22_TragedyInVonHellmannForest/__init__.py
-quests/23_LidiasHeart/__init__.py
+quests/Q00023_LidiasHeart/Q00023_LidiasHeart.java
 quests/Q00024_InhabitantsOfTheForestOfTheDead/Q00024_InhabitantsOfTheForestOfTheDead.java
 quests/25_HidingBehindTheTruth/__init__.py
 quests/Q00026_TiredOfWaiting/Q00026_TiredOfWaiting.java
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-06.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-06.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-06.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-In the locker where you found the hairpin, you also find a book tied with a leather string.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-07.htm"> Examine the book.</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-07a.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-07a.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-07a.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Broken Bookshelf:<br>
+A book tied with a leather string. It's tied very tight, and doesn't seem like it could easily be cut.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-08.html">Try to cut the string.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-04.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-04.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-04.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Violet:<br>
+Find someone among the villagers to express your gratitude to the lord.<br>
+Have you visited Dorian yet?
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-13.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-13.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-13.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Innocentin:<br>
+Then answer me... What is it?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-15.html">"Lidia's Diary."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-20.html">"Alfred's Diary."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-03.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-03.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-03.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Violet:<br>
+This is the very Silver Spear that King Astaire Van Halter bestowed upon Duke Adolph! It's the treasured heirloom of the Hellmann family! The lord will be overjoyed! The long lost honor of his family name is restored, and it's all because of you!<br>
+Thank you. Please accept this small token of our gratitude! I only wish that we could have you over to the castle and give you a more formal recognition...<br>
+I probably have to express our gratitude to the lord through another person, not me. Please talk with the village people.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-13.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-13.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-13.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Innocentin:<br>
-Have you read the document?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-14.htm">"Yes, I read it."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-11.htm">No, I didn't read it."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31530-01.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31530-01.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31530-01.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Box:<br>
-It's an antique box with the von Hellmann family seal on the lock.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31530-02.htm">Use the Silver Spear key.</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-02.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-02.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-02.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Ghost of von Hellmann:<br>
+Oh, the horror! The von Hellmann's are dead and Lidia is a demon? Her curse upon this land is depriving me of my rest!<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31524-03.html">"It's the truth."</a>
+</body></html>
\ No newline at end of file
Index: dist/sql/game/updates/Q00023.sql
===================================================================
--- dist/sql/game/updates/Q00023.sql	(revision 0)
+++ dist/sql/game/updates/Q00023.sql	(working copy)
@@ -0,0 +1 @@
+UPDATE character_quests SET name='Q00023_LidiasHeart' WHERE name='23_LidiasHeart';
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-12.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-12.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-12.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Broken Bookshelf:<br>
+In the chest where you found the book, you also find a hairpin shaped like a Moon Face Flower.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-04.html">Examine the hairpin.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-20.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-20.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-20.htm	(working copy)
@@ -1,7 +0,0 @@
-<html>
-
-<body>
-The moment the words leave your lips, you feel an electric current shoot through your head, buzzing like
-5000 wyverns in flight! Deep within your heart wells an emotion, small but growing more intense by the moment...
-It's remorse! Lidia must have been angered by your answer!
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-02.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-02.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-02.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Innocentin:<br>
+You look tired, my friend! Why don't you take a break, improve your ability and then come back! This next mission is much more challenging than the last one...<br>
+(This quest may only be undertaken by a character of level 64 or above who has completed the Tragedy of Hellmann Forest quest.)
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-12.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-12.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-12.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Innocentin:<br>
+Read it and come back to me... I have many questions!
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-06.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-06.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-06.htm	(working copy)
@@ -1,7 +0,0 @@
-<html><body>Innocentin:<br>
-These days the Silver Spear is awarded to whomever distinguishes himself suppressing the insurrection. One is held by
-the King's royal escort, who recently caught and executed a traitor, and the other spear is held by someone else...
-someone who dealt mercilessly with the undead insurrection and expelled the filthy devil worshippers!<br>
-You'll find him in the temple of Rune Castle Town.<br>
-Don't ask me any more. Take your clues and go find out where the key can be used.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-04.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-04.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-04.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Innocentin:<br>
-He probably drew this Map while exploring the Forest of the Dead. As for the key... I'm not sure.
-The only clue I've found is the Silver Spear engraved upon it.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-05.htm">"Tell me more about the Silver Spear."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31523-05.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31523-05.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31523-05.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Tombstone:<br><br>
-There is a tablet engraved with familiar characters.<br>
-It appears that something else has been crudely etched into the tablet.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-10.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-10.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-10.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-It's a journal that belonged to Lidia von Hellmann. It probably has a lot of useful information in it!<br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-11.htm"> Pick up the journal. </a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-01.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-01.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-01.htm	(working copy)
@@ -1,6 +0,0 @@
-<html><body>Broken Desk:<br>
-The chest opens with a creak.<br>
-Inside, you find an old hairpin and a book tied with a leather string.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-03.htm"> Examine the hair pin.</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-07.htm"> Examine the book. </a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-13.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-13.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-13.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Broken Bookshelf:<br>
+The locker is empty.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-00.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-00.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-00.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Broken Desk:<br>
-The chest is secured with a padlock which bears the mark of the Hellmann family.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-01.htm">Use a Silver Spear key</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-01.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-01.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-01.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Tombstone:<br>
+<font color="LEVEL">One jeweled scepter for the King and two Silver Spears for the von Hellmann family who protects him.</font><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31523-02.html">Wait a while.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-11.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-11.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-11.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Innocentin:<br>
+Really? Have you read it?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-13.html">"Yes, I read it."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-12.html">No, I haven't read it."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-20.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-20.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-20.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>
+The moment the words leave your lips, you feel an electric current shoot through your head, buzzing like 5000 wyverns in flight! Deep within your heart wells an emotion, small but growing more intense by the moment... It's remorse! Lidia must have been angered by your answer!
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-11.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-11.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-11.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Innocentin:<br>
-Read it and come back to me... I have many questions!
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-09.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-09.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-09.htm	(working copy)
@@ -1,6 +0,0 @@
-<html><body>Broken Bookshelf:<br><br>
-"Month of Shilen, 15th day.<br>Lately, Father spends all his days with Nidrah! He doesn't take care of the manor like he
-should.  What makes him so angry?<br>
-What's this?!<br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-10.htm"> "It's Lidia's Diary!"</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-03.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-03.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-03.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Ghost of von Hellmann:<br>
+How did she become the Lord of the Dead?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31524-04.html">"Here's her diary."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-19.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-19.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-19.htm	(working copy)
@@ -1,6 +0,0 @@
-<html><body>Innocentin:<br>
-Ah ha! Then that hairpin must belong to Lidia!<br>
-Now I remember it! She used to wear it in her hair! Sigh... She was so beautiful then...<br>
-Thank you for your help! I suppose our business is done now, but your journey continues...<br>
-I'll always be here for you if you have any questions.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-17.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-17.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-17.htm	(working copy)
@@ -1,9 +0,0 @@
-<html><body>Innocentin:<br>
-A Contract?!<br>
-I'll bet that rascal Nidrah was behind this! Was he involved?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-11.htm">"Yes, he forced her to sign the Contract."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-18.htm">"Lidia approached Nidrah."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-11.htm">"Nidrah wasn't involved."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-11.htm">"As I said before, Lidia was bitten by a vampire!
-Don't you get it?"</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31523-02.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31523-02.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31523-02.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Tombstone:<br><br>
-After a while, a white ghost appears.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31386-02.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31386-02.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31386-02.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Violet:<br>
-I can't go there. I can't leave this village!<br>
-Go towards the northern part of the village, you'll find a box near the center of the Forest of the Dead. This key opens
-the padlock on the box.<br>Bring me the object you find inside the box.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31523-03.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31523-03.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31523-03.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Tombstone:<br><br>
-The ghost was beside you all along!
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-14.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-14.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-14.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Innocentin:<br>
+Have you read the document?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-13.html">"Yes, I read it."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-12.html">No, I didn't read it."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-15.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-15.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-15.html	(working copy)
@@ -0,0 +1,7 @@
+<html><body>Innocentin:<br>
+Lidia's Diary?<br>
+Lidia was dear Alfred's precious daughter... They led an idyllic life, until that tragic day...<br>
+Does her diary cover the period after she became lord of the forest?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-16.html">"Yes, it does."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-20.html">"No, it doesn't."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-04.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-04.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-04.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Tombstone:<br>
+There is a tablet engraved with familiar characters.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31523-06.html">Dig</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31523-02.html">Recall the ghost</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-03.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-03.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-03.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Box:<br>
+It's empty.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-08.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-08.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-08.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Broken Bookshelf:<br>
+When you cut the string, it falls to the floor and you hear a faint sigh.<br>
+Shall you read the book?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-09.html">Read the book.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-01.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-01.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-01.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Broken Desk:<br>
+The chest is secured with a padlock which bears the mark of the Hellmann family.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-02.html">Use a Silver Spear key</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-01.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-01.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-01.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Innocentin:<br>
-You've been a great help to me in the past, and I'd like to thank you again for bringing me that report!
-There's one more thing... Could you help me out again?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-02.htm">"OK, whatever."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-06.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-06.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-06.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Tombstone:<br>
+You find a key engraved with a silver spear.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-09.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-09.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-09.htm	(working copy)
@@ -1,6 +0,0 @@
-<html><body>Innocentin:<br>
-Please! Put those things away...Please!<br>
-I'm sorry, but the power of darkness contained in them is overpowering! I can't even look at them...<br>
-How about you? Are you okay?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-10.htm">"I'm fine."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-05.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-05.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-05.htm	(working copy)
@@ -1,8 +0,0 @@
-<html><body>Innocentin:<br>
-According to a custom from the Elmoreden period, a Silver Spear was the symbol of the family responsible for guarding
-the royal family.<br>
-An ancient proverb says, <font color="LEVEL">"A jeweled scepter for the mighty King of Elmore and two Silver Spears for
-his protectors"</font>.<br>
-I'll wager that somewhere is a lock that matches this key...<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-06.htm">"Who holds the spear now?"</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-07.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-07.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-07.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>High Priestess Innocentin:<br>
+Today's silver spears are dedicated to the people who worked hard to suppress the rebellion. One is for the protectors of the royal family, who captured and punished the rebels, and one is for those who fought against the undead and captured the demon's followers... and it will therefore be a dedication that upholds the false accusations against our former priests.<br>
+The one responsible for all this is staying at the temple in Rune Castle Town.<br>
+Please don't ask any more questions. Just take the records that he left behind, and find out where that key fits.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-16.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-16.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-16.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Innocentin:<br>
-What did you learn from the diary?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-11.htm">"Lidia was bitten by a vampire."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-17.htm">"Lidia signed some sort of Contract."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-11.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-11.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-11.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-You've found Lidia's Diary!<br>
-Check the bookshelf again. You may find something else.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-00.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-00.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-00.htm	(working copy)
@@ -1,7 +0,0 @@
-<html><body>Innocentin:<br>
-This is something you can get started on immediately!<br>
-There's a vast conspiracy afoot in Rune Castle Town and the Forest of the Dead!<br>
-The roots of this conspiracy lie in that forest, and you should seek the truth there.<br>
-(This quest may only be undertaken by a character of level 64 or above who has completed the Hidden Truth and
-Tragedy of Hellmann Forest quests.)
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-16.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-16.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-16.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Innocentin:<br>
+What did you learn from the diary?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-20.html">"Lidia was bitten by a vampire."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-17.html">"Lidia signed some sort of contract."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-07.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-07.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-07.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-A book tied with a leather string. It's tied very tight, and doesn't seem like it could easily be cut.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-08.htm"> Try to cut the string.</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-05.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-05.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-05.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-You took the hairpin.<br>
-Check the bookshelf. You may find something else.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-05.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-05.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-05.html	(working copy)
@@ -0,0 +1,6 @@
+<html><body>Broken Bookshelf:<br>
+According to legend, the Moon Face Flower only blooms on moonlit nights.<br>
+It's very shy, and shows its face only to its future husband. This legend made it quite popular among young, single, aristocratic ladies.<br>
+I wonder who might have owned this one?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-06.html">Take the hairpin.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-02.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-02.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-02.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-The chest opens with a creak. Inside, you find an old hairpin and a book tied with a leather string.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-03.htm"> Examine the hair pin.</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-07.htm"> Examine the book.</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-15.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-15.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-15.htm	(working copy)
@@ -1,7 +0,0 @@
-<html><body>Innocentin:<br>
-Lidia's Diary?<br>
-Lidia was dear Alfred's precious daughter... They led an idyllic life, until that tragic day...<br>
-Does her diary cover the period after she became lord of the forest?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-16.htm">"Yes, it does."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-11.htm">"No, it doesn't."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-04.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-04.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-04.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Innocentin:<br>
+He probably drew this Map while exploring the Forest of the Dead. As for the key... I'm not sure. The only clue I've found is the Silver Spear engraved upon it.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-06.html">"Tell me more about the Silver Spear."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-14.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-14.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-14.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Innocentin:<br>
-Then answer me... What is it?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-15.htm">"Lidia's Diary."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-13.htm">"Alfred's Diary."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-05.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-05.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-05.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Innocentin:<br>
+He probably drew this Map while exploring the Forest of the Dead. As for the key... I'm not sure. The only clue I've found is the Silver Spear engraved upon it.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-06.html">"Tell me more about the Silver Spear."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-09.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-09.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-09.html	(working copy)
@@ -0,0 +1,6 @@
+<html><body>Broken Bookshelf:<br>
+"Month of Shilen, 15th day.<br>
+Lately, Father spends all his days with Nidrah! He doesn't take care of the manor like he should. What makes him so angry?"<br>
+What's this?!<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-10.html">"It's Lidia's Diary!"</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-07.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-07.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-07.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Innocentin:<br>
-You must find the lock that matches that key! It would probably be in the possession of a family worthy of the spear!
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-12.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-12.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-12.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Innocentin:<br>
-Then answer me... What is it?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-15.htm">"Lidia's Diary."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-13.htm">"Alfred's Diary."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31386-01.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31386-01.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31386-01.htm	(working copy)
@@ -1,8 +0,0 @@
-<html><body>Violet:<br>
-Oh, the key? That's right! That's the key that Duke Adolph von Hellmann asked me to keep for him! That was a very long time
-ago! He told me that it guards the highest honor his family received from the King!<br>
-But I can't go there. I can't leave this village.<br>
-Go towards the northern part of the village. You'll find a box near the center of the Forest of the Dead. This key opens
-the padlock on the box.<br>
-Bring me the object you find inside the box.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-09.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-09.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-09.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Innocentin:<br>
+So, did you find anything?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-10.html">"Here is the diary and the hairpin."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-12.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-12.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-12.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-In the chest where you found the book, you also find a hairpin shaped like a Moon Face Flower.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-03.htm"> Examine the hairpin.</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31386-03.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31386-03.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31386-03.htm	(working copy)
@@ -1,8 +0,0 @@
-<html><body>Violet:<br>
-This is the very Silver Spear that King Astaire Van Halter bestowed upon Duke Adolph! It's the treasured heirloom of the
-Hellmann family!  The lord will be overjoyed! The long lost honor of his family name is restored, and it's all because of
-you!<br>
-Thank you. Please accept this small token of our gratitude! I only wish that we could have you over to the castle and give
-you a more formal recognition...<br>
-I probably have to express our gratitude to the lord through another person, not me. Please talk with the village people.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-08.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-08.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-08.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Innocentin:<br>
+You must find the lock that matches that key! It would probably be in the possession of a family worthy of the spear!
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-03.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-03.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-03.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Innocentin:<br>
-He probably drew this Map while exploring the Forest of the Dead. As for the key...
-I'm not sure. The only clue I've found is the Silver Spear engraved upon it.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-05.htm">"Tell me more about the Silver Spear."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-02.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-02.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-02.html	(working copy)
@@ -0,0 +1,6 @@
+<html><body>Broken Desk:<br>
+The chest opens with a creak.<br>
+Inside, you find an old hairpin and a book tied with a leather string.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-04.html">Examine the hair pin.</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-07a.html">Examine the book.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-02.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-02.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-02.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Box:<br>
+The box opens.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-11.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-11.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-11.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Broken Bookshelf:<br>
+You've found Lidia's Diary!<br>
+Check the bookshelf again. You may find something else.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-01.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-01.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31530-01.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Box:<br>
+It's an antique box with the von Hellmann family seal on the lock.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31530-02.html">Use the Silver Spear key.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-03.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-03.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-03.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Broken Bookshelf:<br>
+The chest opens with a creak. Inside, you find an old hairpin and a book tied with a leather string.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-04.html">Examine the hair pin.</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-07a.html">Examine the book.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-04.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-04.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-04.htm	(working copy)
@@ -1,7 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-According to legend,the Moon Face Flower only blooms on moonlit nights.<br>
-It's very shy, and shows its face only to its future husband.This legend made it quite popular among young, single,
-aristocratic ladies.<br>
-I wonder who might have owned this one? <br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-05.htm"> Take the hairpin. </a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-06.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-06.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-06.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Ghost of von Hellmann:<br>
+Take the key to von Hellmann's page, He's in <font color="LEVEL">the hidden village in the center of the forest</font>.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-03.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-03.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-03.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-The hair pin is a type once used by aristocratic ladies.It's engraved with the image of a Moon Face Flower, and was
-probably used by a unattached young lady. <br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-04.htm"> "I wonder what that design means?"</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-01.htm
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-01.htm	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-01.htm	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Innocentin:<br>
+You've been a great help to me in the past, and I'd like to thank you again for bringing me that report! There's one more thing... Could you help me out again?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-03.html">"OK, whatever."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31530-02.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31530-02.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31530-02.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Box:<br>
-The box opens.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-18.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-18.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-18.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Innocentin:<br>
+Oh really? Then let me ask you one more question. Have you ever heard the expression <font color="LEVEL">Owner of a Moon Face Flower"</font>?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-19.html">"It's the Lord of the Forest of the Dead."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-19.html">"It's Lidia von Hellmann."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-08.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-08.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-08.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Innocentin:<br>
-So, did you find anything?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-09.htm">"Here is the diary and the hairpin."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31524-04.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31524-04.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31524-04.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Ghost of von Hellmann:<br>
-Her diary?! How wonderful!<br>
-I'll reward you if you retrieve my key from under the monument. Take it and find the von Hellmann's page.
-<font color="LEVEL">He's in the hidden village in the center of the forest</font>.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00024_InhabitantsOfTheForestOfTheDead/Q00024_InhabitantsOfTheForestOfTheDead.java
===================================================================
--- dist/game/data/scripts/quests/Q00024_InhabitantsOfTheForestOfTheDead/Q00024_InhabitantsOfTheForestOfTheDead.java	(revision 9906)
+++ dist/game/data/scripts/quests/Q00024_InhabitantsOfTheForestOfTheDead/Q00024_InhabitantsOfTheForestOfTheDead.java	(working copy)
@@ -18,6 +18,8 @@
  */
 package quests.Q00024_InhabitantsOfTheForestOfTheDead;
 
+import quests.Q00023_LidiasHeart.Q00023_LidiasHeart;
+
 import com.l2jserver.gameserver.model.actor.L2Npc;
 import com.l2jserver.gameserver.model.actor.instance.L2PcInstance;
 import com.l2jserver.gameserver.model.quest.Quest;
@@ -71,7 +73,7 @@
 		{
 		// Dorian
 			case "31389-02.htm":
-				final QuestState qs = player.getQuestState("23_LidiasHeart");
+				final QuestState qs = player.getQuestState(Q00023_LidiasHeart.class.getSimpleName());
 				if ((player.getLevel() > 65) && (qs != null) && qs.isCompleted())
 				{
 					st.startQuest();
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-03.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-03.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-03.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Tombstone:<br>
+The ghost was beside you all along!
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-02.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-02.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-02.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Innocentin:<br>
-Here's the Map and key he left behind. Take them and find out what he was searching for.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-03.htm">"Tell me more about the Map and key."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31524-05.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31524-05.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31524-05.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Ghost of von Hellmann:<br>
-<font color="LEVEL">Dig under this monument for the key and take it to the von Hellmann's page.</font><br>
-He's in the hidden village in the center of the forest.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-18.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-18.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-18.htm	(working copy)
@@ -1,6 +0,0 @@
-<html><body>Innocentin:<br>
-Oh really? Then let me ask you one more question. Have you ever heard the expression <font color="LEVEL">"Owner of
-a Moon Face Flower"</font>?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-19.htm">"It's the Lord of the Forest of the Dead."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-11.htm">"It's Lidia von Hellmann."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31386-04.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31386-04.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31386-04.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Violet:<br>
-Find someone among the villagers to express your gratitude to the lord.<br>
-Have you visited Doriun yet?
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-04.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-04.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-04.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Broken Bookshelf:<br>
+The hair pin is a type once used by aristocratic ladies. It's engraved with the image of a Moon Face Flower, and was probably used by a unattached young lady.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-05.html">"I wonder what that design means?"</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-06.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-06.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-06.html	(working copy)
@@ -0,0 +1,6 @@
+<html><body>Innocentin:<br>
+According to a custom from the Elmoreden period, a Silver Spear was the symbol of the family responsible for guarding the royal family.<br>
+An ancient proverb says, <font color="LEVEL">A jeweled scepter for the mighty King of Elmore and two Silver Spears for his protectors"</font>.<br>
+I'll wager that somewhere is a lock that matches this key...<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-07.html">"Who holds the spear now?"</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/__init__.py
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/__init__.py	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/__init__.py	(working copy)
@@ -1,177 +0,0 @@
-#  Created by Skeleton, Rewritten by Eyerobot
-import sys
-from com.l2jserver.gameserver.model.quest import State
-from com.l2jserver.gameserver.model.quest import QuestState
-from com.l2jserver.gameserver.model.quest import Quest as JQuest
-from com.l2jserver.gameserver.network.serverpackets import NpcSay
-
-qn = "23_LidiasHeart"
-
-# ~~~~~~ npcId list: ~~~~~~
-Innocentin          = 31328
-BrokenBookshelf     = 31526
-GhostofvonHellmann  = 31524
-Tombstone           = 31523
-Violet              = 31386
-Box                 = 31530
-# ~~~~~~~~~~~~~~~~~~~~~~~~~
-
-# ~~~~~ itemId List ~~~~~
-MapForestofDeadman = 7063
-SilverKey          = 7149
-LidiaHairPin       = 7148
-LidiaDiary         = 7064
-SilverSpear        = 7150
-Adena              = 57
-# ~~~~~~~~~~~~~~~~~~~~~~~
-
-class Quest (JQuest) : 
-
-    def __init__(self,id,name,descr):  
-       JQuest.__init__(self,id,name,descr)
-       self.questItemIds = [MapForestofDeadman,SilverKey,LidiaHairPin,LidiaDiary,SilverSpear] 
-
-    def onAdvEvent (self,event,npc,player) :
-        st = player.getQuestState(qn)
-        htmltext = event
-        if event == "31328-02.htm": # call 31328-03.htm
-            st.giveItems(MapForestofDeadman,1)
-            st.giveItems(SilverKey,1)
-            st.set("cond","1")
-            st.playSound("ItemSound.quest_accept")
-            st.setState(State.STARTED)
-        elif event == "31328-03.htm": # call 31328-05.htm and 31328-06.htm
-            st.set("cond","2")
-            st.playSound("ItemSound.quest_middle")
-        elif event == "31526-05.htm": # called by 31526-03.htm for hairpin
-            if st.getQuestItemsCount(LidiaHairPin) == 0:
-                st.giveItems(LidiaHairPin,1) # give hairpin
-                if st.getQuestItemsCount(LidiaDiary) != 0: # if has diary cond = 4
-                    st.set("cond","4")
-                    st.playSound("ItemSound.quest_middle")
-        elif event == "31526-11.htm": # called by 31526-07 for diary
-            if st.getQuestItemsCount(LidiaDiary) == 0:
-                st.giveItems(LidiaDiary,1)
-                if st.getQuestItemsCount(LidiaHairPin) != 0: # if has hairpin cond = 4
-                    st.set("cond","4")
-                    st.playSound("ItemSound.quest_middle")
-        elif event == "31328-19.htm": # end of questions loop go to ghost
-            st.set("cond","6")
-            st.playSound("ItemSound.quest_middle")
-        elif event == "31524-04.htm":# sends you to the tombstone to dig
-            st.set("cond","7")
-            st.playSound("ItemSound.quest_middle")
-            st.takeItems(LidiaDiary,-1)
-        elif event == "31523-02.htm":
-            st.playSound("SkillSound5.horror_02")
-            ghost = st.addSpawn(31524,51432,-54570,-3136,1800000)
-            ghost.broadcastPacket(NpcSay(ghost.getObjectId(),0,ghost.getId(),"Who awoke me?"))
-        elif event == "31523-05.htm":
-            st.startQuestTimer("ghost_timer",10000)
-        elif event == "ghost_timer":
-            st.set("cond","8")
-            htmltext = "31523-06.htm"
-            st.giveItems(SilverKey,1)
-        elif event == "31530-02.htm":# box gives spear takes key
-            st.set("cond","10")
-            st.playSound("ItemSound.quest_middle")
-            st.takeItems(SilverKey,-1)
-            st.giveItems(SilverSpear,1)
-        return htmltext
-
-    def onTalk (self,npc,player):
-        htmltext = Quest.getNoQuestMsg(player)
-        st = player.getQuestState(qn)
-        if not st : return htmltext
-        state = st.getState()
-        if state == State.COMPLETED :
-            htmltext = Quest.getAlreadyCompletedMsg(player)
-        npcId = npc.getId()
-        cond = st.getInt("cond")
-        if npcId == Innocentin :
-            if state == State.CREATED :
-                st2 = st.getPlayer().getQuestState("22_TragedyInVonHellmannForest")
-                if st2 :
-                    if st2.getState() == State.COMPLETED and player.getLevel() >= 64:
-                        htmltext = "31328-01.htm" # previous quest finished, call 31328-02.htm
-                    else:
-                        htmltext = "31328-00.htm" # requirements not met
-            elif cond == 1 :
-                htmltext = "31328-03.htm"
-            elif cond == 2 :
-                htmltext = "31328-07.htm"
-            elif cond == 4 :
-                htmltext = "31328-08.htm"
-            elif cond == 6 :
-                htmltext = "31328-19.htm"
-        elif npcId == BrokenBookshelf:
-            if cond == 2 : 
-                if st.getQuestItemsCount(SilverKey) != 0:
-                    htmltext = "31526-00.htm"
-                    st.playSound("ItemSound.quest_middle")
-                    st.set("cond","3")
-            elif cond == 3 :
-                if st.getQuestItemsCount(SilverKey) != 0:
-                    htmltext = "31526-00.htm"
-                    st.playSound("ItemSound.quest_middle")
-                    st.set("cond","3")
-                elif st.getQuestItemsCount(LidiaHairPin) == 0 and st.getQuestItemsCount(LidiaDiary) != 0:
-                    htmltext = "31526-12.htm"
-                elif st.getQuestItemsCount(LidiaHairPin) != 0 and st.getQuestItemsCount(LidiaDiary) == 0:
-                    htmltext = "31526-06.htm"
-                elif st.getQuestItemsCount(LidiaHairPin) == 0 and st.getQuestItemsCount(LidiaDiary) == 0:
-                    htmltext = "31526-02.htm"
-            elif cond == 4 :
-                htmltext = "31526-13.htm"
-        elif npcId == GhostofvonHellmann:
-            if cond == 6 :
-                htmltext = "31524-01.htm" # sends you to the tombstone to dig
-            elif cond == 7 :
-                htmltext = "31524-05.htm"
-        elif npcId == Tombstone:
-            if cond == 6 :
-                if st.getQuestTimer("spawn_timer") != None:
-                    htmltext = "31523-03.htm"
-                else:
-                    htmltext = "31523-01.htm"
-            if cond == 7 :
-                htmltext = "31523-04.htm"
-            elif cond == 8 :
-                htmltext = "31523-06.htm"
-        elif npcId == Violet:
-            if cond == 8 :
-                htmltext = "31386-01.htm" # send to box 
-                st.playSound("ItemSound.quest_middle")
-                st.set("cond","9")
-            elif cond == 9 :
-                htmltext = "31386-02.htm"
-            elif cond == 10 :
-                if st.getQuestItemsCount(SilverSpear) != 0:
-                    htmltext = "31386-03.htm"
-                    st.takeItems(SilverSpear,-1)
-                    st.giveItems(Adena,350000)
-                    st.addExpAndSp(456893,42112)
-                    st.exitQuest(False)
-                    st.playSound("ItemSound.quest_finish")
-                else:
-                    htmltext = "You have no Silver Spear..."
-        elif npcId == Box:
-            if cond == 9 :
-                if st.getQuestItemsCount(SilverKey) != 0:
-                    htmltext = "31530-01.htm"
-                else:
-                    htmltext = "You have no key..."
-            elif cond == 10 :
-                htmltext = "31386-03.htm"
-        return htmltext
-
-QUEST     = Quest(23,qn,"Lidia's Heart")
-
-QUEST.addStartNpc(Innocentin)
-
-QUEST.addTalkId(Innocentin)
-QUEST.addTalkId(BrokenBookshelf)
-QUEST.addTalkId(GhostofvonHellmann)
-QUEST.addTalkId(Tombstone)
-QUEST.addTalkId(Violet)
-QUEST.addTalkId(Box)
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31524-03.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31524-03.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31524-03.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Ghost of von Hellmann:<br>
-How did she become the Lord of the Dead?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31524-04.htm">"Here's her diary."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-01a.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-01a.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-01a.html	(working copy)
@@ -0,0 +1,6 @@
+<html><body>Innocentin:<br>
+This is something you can get started on immediately!<br>
+There's a vast conspiracy afoot in the Rune Township and the Forest of the Dead!<br>
+The roots of this conspiracy lie in that forest, and you should seek the truth there.<br>
+(This quest may only be undertaken by a character of level 64 or above who has completed the Hidden Truth and Tragedy of Hellmann Forest quests.)
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-17.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-17.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-17.html	(working copy)
@@ -0,0 +1,8 @@
+<html><body>Innocentin:<br>
+A contract?!<br>
+I'll bet that rascal Nidrah was behind this! Was he involved?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-20.html">"Yes, he forced her to sign the contract."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-18.html">"Lidia approached Nidrah."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-20.html">"Nidrah wasn't involved."</a><br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-20.html">"As I said before, Lidia was bitten by a vampire! Don't you get it?"</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-21.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-21.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-21.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Innocentin:<br>
+I don't think your journey's over yet. Someone close to her wants to see you. He'll show you the path that leads to your next adventure.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31524-02.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31524-02.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31524-02.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Ghost of von Hellmann:<br>
-Oh, the horror! The von Hellmann's are dead and Lidia is a demon? Her curse upon this land is depriving me of my rest!<br>
-<a action="bypass -h Quest 23_LidiasHeart 31524-03.htm">"It's the truth."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31524-01.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31524-01.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31524-01.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Ghost of von Hellmann:<br>
-Who has summoned me here? Why can't I sleep?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31524-02.htm">"Let me tell you about Lidia von Hellmann."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-01.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-01.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-01.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Ghost of von Hellmann:<br>
+Who has summoned me here? Why can't I sleep?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31524-02.html">"Let me tell you about Lidia von Hellmann."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-04.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-04.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-04.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Ghost of von Hellmann:<br>
+This concerns Lidia's Diary? Is that right? Oh, I see! Dear traveler! For whatever little time I have left, I'll read this diary and go over the past again and again in my mind!<br>
+Traveler, I shall reward you well for this diary! Dig underneath this tombstone and you will find my key!<br>
+Take that key to the Chamberlain of the Hellmann Family! You'll find him <font color="LEVEL">in the village hidden in the middle of this forest</font>!
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31523-06.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31523-06.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31523-06.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Tombstone:<br><br>
-You find a key engraved with a Silver Spear.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-08.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-08.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-08.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-When you cut the string, it falls to the floor and you hear a faint sigh.<br>
-Shall you read the book? <br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-09.htm"> Read the book.</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-10.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-10.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-10.html	(working copy)
@@ -0,0 +1,6 @@
+<html><body>Innocentin:<br>
+Please! Put those things away...Please!<br>
+I'm sorry, but the power of darkness contained in them is overpowering! I can't even look at them...<br>
+How about you? Are you okay?<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-11.html">"I'm fine."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-03.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-03.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-03.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Innocentin:<br>
+Here's the Map and key he left behind. Take them and find out what he was searching for.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31328-05.html">"Tell me more about the Map and key."</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31524-06.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31524-06.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31524-06.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Ghost of von Hellmann:<br>
-Take the key to von Hellmann's page, He's in <font color="LEVEL">the hidden village in the center of the forest</font>.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-10.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-10.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-10.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Broken Bookshelf:<br>
+It's a journal that belonged to Lidia von Hellmann. It probably has a lot of useful information in it!<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-11.html">Pick up the journal.</a>
+</body></html>
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/Q00023_LidiasHeart.java
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/Q00023_LidiasHeart.java	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/Q00023_LidiasHeart.java	(working copy)
@@ -0,0 +1,523 @@
+/*
+ * Copyright (C) 2004-2013 L2J DataPack
+ * 
+ * This file is part of L2J DataPack.
+ * 
+ * L2J DataPack is free software: you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation, either version 3 of the License, or
+ * (at your option) any later version.
+ * 
+ * L2J DataPack is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
+ * General Public License for more details.
+ * 
+ * You should have received a copy of the GNU General Public License
+ * along with this program. If not, see <http://www.gnu.org/licenses/>.
+ */
+package quests.Q00023_LidiasHeart;
+
+import quests.Q00022_TragedyInVonHellmannForest.Q00022_TragedyInVonHellmannForest;
+import quests.Q00024_InhabitantsOfTheForestOfTheDead.Q00024_InhabitantsOfTheForestOfTheDead;
+
+import com.l2jserver.gameserver.enums.QuestSound;
+import com.l2jserver.gameserver.model.Location;
+import com.l2jserver.gameserver.model.actor.L2Npc;
+import com.l2jserver.gameserver.model.actor.instance.L2PcInstance;
+import com.l2jserver.gameserver.model.quest.Quest;
+import com.l2jserver.gameserver.model.quest.QuestState;
+import com.l2jserver.gameserver.model.quest.State;
+import com.l2jserver.gameserver.network.NpcStringId;
+import com.l2jserver.gameserver.network.serverpackets.NpcSay;
+
+/**
+ * Lidia's Heart (23)
+ * @author Joxit
+ */
+public class Q00023_LidiasHeart extends Quest
+{
+	// NPCs
+	private static final int INNOCENTIN = 31328;
+	private static final int VIOLET = 31386;
+	private static final int TOMBSTONE = 31523;
+	private static final int HELLMANN = 31524;
+	private static final int BOOKSHELF = 31526;
+	private static final int BOX = 31530;
+	// Items
+	private static final int MAP = 7063;
+	private static final int KEY = 7149;
+	private static final int HAIRPIN = 7148;
+	private static final int DIARY = 7064;
+	private static final int SPEAR = 7150;
+	// Misc
+	private static final int MIN_LVL = 64;
+	private static final Location GHOST_LOC = new Location(51432, -54570, -3136);
+	private static boolean _isGhostSpawned = false;
+	
+	public Q00023_LidiasHeart()
+	{
+		super(23, Q00023_LidiasHeart.class.getSimpleName(), "Lidia's Heart");
+		addStartNpc(INNOCENTIN);
+		addTalkId(INNOCENTIN, VIOLET, TOMBSTONE, HELLMANN, BOOKSHELF, BOX);
+		registerQuestItems(KEY, DIARY, SPEAR);
+	}
+	
+	@Override
+	public String onAdvEvent(String event, L2Npc npc, L2PcInstance player)
+	{
+		final QuestState st = getQuestState(player, false);
+		String htmltext = null;
+		if (st == null)
+		{
+			return htmltext;
+		}
+		switch (event)
+		{
+			case "31524-03.html":
+			case "31526-09.html":
+			case "31526-07a.html":
+			case "31526-05.html":
+			case "31526-04.html":
+			case "31328-17.html":
+			case "31328-16.html":
+			case "31328-15.html":
+			case "31328-11.html":
+			case "31328-10.html":
+			case "31328-06.html":
+			case "31328-05.html":
+			{
+				htmltext = event;
+				break;
+			}
+			case "31328-03.html":
+			{
+				final QuestState qs = player.getQuestState(Q00022_TragedyInVonHellmannForest.class.getSimpleName());
+				if ((player.getLevel() >= MIN_LVL) && (qs != null) && qs.isCompleted())
+				{
+					st.startQuest();
+					giveItems(player, MAP, 1);
+					giveItems(player, KEY, 1);
+					htmltext = event;
+				}
+				else
+				{
+					htmltext = "31328-02.htm";
+				}
+				break;
+			}
+			case "31328-07.html":
+			{
+				if (st.isCond(1))
+				{
+					st.setCond(2, true);
+					htmltext = event;
+				}
+				break;
+			}
+			case "31328-12.html":
+			{
+				if (st.isCond(4) || (st.isMemoState(6)))
+				{
+					st.setMemoState(6);
+					st.setCond(5, true);
+					htmltext = event;
+				}
+				break;
+			}
+			case "31328-13.html":
+			{
+				if (st.isCond(4) || (st.isMemoState(6)))
+				{
+					st.setMemoState(7);
+					htmltext = event;
+				}
+				break;
+			}
+			case "31328-19.html":
+			{
+				playSound(player, QuestSound.AMBSOUND_MT_CREAK);
+				htmltext = event;
+				break;
+			}
+			case "31328-20.html":
+			{
+				if (st.isMemoState(7))
+				{
+					st.setCond(6, true);
+					st.unset("memoState"); // useless?
+					htmltext = event;
+				}
+				break;
+			}
+			case "31328-21.html":
+			{
+				st.setCond(5, true);
+				htmltext = event;
+				break;
+			}
+			case "31526-02.html":
+			{
+				if (st.isCond(3) && st.hasQuestItems(KEY))
+				{
+					takeItems(player, KEY, -1);
+					htmltext = event;
+				}
+				break;
+			}
+			case "31526-06.html":
+			{
+				if (!hasQuestItems(player, HAIRPIN))
+				{
+					giveItems(player, HAIRPIN, 1);
+					if (hasQuestItems(player, DIARY))
+					{
+						st.setCond(4, true);
+					}
+					htmltext = event;
+				}
+				break;
+			}
+			case "31526-08.html":
+			{
+				playSound(player, QuestSound.ITEMSOUND_ARMOR_LEATHER);
+				htmltext = event;
+				break;
+			}
+			case "31526-10.html":
+			{
+				playSound(player, QuestSound.AMBSOUND_EG_DRON);
+				htmltext = event;
+				break;
+			}
+			case "31526-11.html":
+			{
+				if (!hasQuestItems(player, DIARY))
+				{
+					giveItems(player, DIARY, 1);
+					if (hasQuestItems(player, HAIRPIN))
+					{
+						st.setCond(4, true);
+					}
+					htmltext = event;
+				}
+				break;
+			}
+			case "31524-02.html":
+			{
+				playSound(player, QuestSound.CHRSOUND_MHFIGHTER_CRY);
+				htmltext = event;
+				break;
+			}
+			case "31524-04.html":
+			{
+				if (st.isCond(6))
+				{
+					takeItems(player, DIARY, -1);
+					st.setCond(7, true);
+					htmltext = event;
+				}
+				break;
+			}
+			case "31523-02.html":
+			{
+				if (st.isCond(6) || st.isCond(7))
+				{
+					if (!_isGhostSpawned)
+					{
+						_isGhostSpawned = true;
+						final L2Npc ghost1 = addSpawn(HELLMANN, GHOST_LOC, true, 0);
+						st.startQuestTimer("DESPAWN_GHOST1", 1000 * 300, ghost1);
+						ghost1.broadcastPacket(new NpcSay(ghost1.getObjectId(), 0, ghost1.getId(), NpcStringId.WHO_AWOKE_ME));
+						playSound(player, QuestSound.SKILLSOUND_HORROR_02);
+						htmltext = event;
+					}
+					else
+					{
+						playSound(player, QuestSound.SKILLSOUND_HORROR_02);
+						htmltext = "31523-03.html";
+					}
+				}
+				break;
+			}
+			case "DESPAWN_GHOST1":
+			{
+				_isGhostSpawned = false;
+				npc.deleteMe();
+				break;
+			}
+			case "31523-06.html":
+			{
+				if (st.isCond(7))
+				{
+					giveItems(player, KEY, 1);
+					st.setCond(8, true);
+					htmltext = event;
+				}
+				break;
+			}
+			case "31530-02.html":
+			{
+				if (st.isCond(9) && hasQuestItems(player, KEY))
+				{
+					takeItems(player, KEY, -1);
+					giveItems(player, SPEAR, 1);
+					st.setCond(10, true);
+					htmltext = event;
+				}
+				break;
+			}
+		}
+		return htmltext;
+	}
+	
+	@Override
+	public String onTalk(L2Npc npc, L2PcInstance talker)
+	{
+		final QuestState st = getQuestState(talker, false);
+		String htmltext = getNoQuestMsg(talker);
+		if (st == null)
+		{
+			return htmltext;
+		}
+		
+		switch (st.getState())
+		{
+			case State.CREATED:
+			{
+				if (npc.getId() == INNOCENTIN)
+				{
+					final QuestState qs = talker.getQuestState(Q00022_TragedyInVonHellmannForest.class.getSimpleName());
+					if ((qs != null) && qs.isCompleted())
+					{
+						htmltext = "31328-01.htm";
+					}
+					else
+					{
+						htmltext = "31328-01a.html";
+					}
+				}
+				break;
+			}
+			case State.STARTED:
+			{
+				switch (npc.getId())
+				{
+					case INNOCENTIN:
+					{
+						switch (st.getCond())
+						{
+							case 1:
+							{
+								htmltext = "31328-04.html";
+								break;
+							}
+							case 2:
+							{
+								htmltext = "31328-08.html";
+								break;
+							}
+							case 4:
+							{
+								htmltext = "31328-09.html";
+								break;
+							}
+							case 5:
+							{
+								switch (st.getMemoState())
+								{
+									case 6:
+									{
+										htmltext = "31328-14.html";
+										break;
+									}
+									case 7:
+									{
+										htmltext = "31328-13.html";
+										break;
+									}
+								}
+								break;
+							}
+							case 6:
+							{
+								htmltext = "31328-21.html";
+								break;
+							}
+						}
+						break;
+					}
+					case BOOKSHELF:
+					{
+						switch (st.getCond())
+						{
+							case 2:
+							{
+								if (hasQuestItems(talker, KEY))
+								{
+									st.setCond(3, true);
+									htmltext = "31526-01.html";
+								}
+								break;
+							}
+							case 3:
+							{
+								if (!hasQuestItems(talker, KEY))
+								{
+									final boolean hasPin = hasQuestItems(talker, HAIRPIN);
+									final boolean hasDiary = hasQuestItems(talker, DIARY);
+									if (!hasPin && !hasDiary)
+									{
+										htmltext = "31526-03.html";
+									}
+									else if (hasPin)
+									{
+										htmltext = "31526-07.html";
+									}
+									else if (hasDiary)
+									{
+										htmltext = "31526-12.html";
+									}
+								}
+								break;
+							}
+							case 4:
+							{
+								if (hasQuestItems(talker, HAIRPIN) && hasQuestItems(talker, DIARY))
+								{
+									htmltext = "31526-13.html";
+								}
+								break;
+							}
+						}
+						break;
+					}
+					case HELLMANN:
+					{
+						switch (st.getCond())
+						{
+							case 6:
+							{
+								htmltext = "31524-01.html";
+								break;
+							}
+							case 7:
+							{
+								htmltext = (hasQuestItems(talker, KEY) ? "31524-06.html" : "31524-05.html");
+								break;
+							}
+							case 8:
+							{
+								if (hasQuestItems(talker, KEY))
+								{
+									htmltext = "31524-06.html";
+								}
+								break;
+							}
+						}
+						break;
+					}
+					case TOMBSTONE:
+					{
+						switch (st.getCond())
+						{
+							case 6:
+							{
+								htmltext = "31523-01.html";
+								break;
+							}
+							case 7:
+							{
+								htmltext = "31523-04.html";
+								break;
+							}
+							case 8:
+							{
+								htmltext = "31523-05.html";
+								break;
+							}
+						}
+						break;
+					}
+					case VIOLET:
+					{
+						switch (st.getCond())
+						{
+							case 8:
+							{
+								if (hasQuestItems(talker, KEY))
+								{
+									st.setCond(9, true);
+									htmltext = "31386-01.html";
+								}
+								break;
+							}
+							case 10:
+							{
+								if (!hasQuestItems(talker, SPEAR))
+								{
+									htmltext = "31386-02.html";
+								}
+								else
+								{
+									giveAdena(talker, 350000, true);
+									addExpAndSp(talker, 456893, 42112);
+									st.exitQuest(false, true);
+									htmltext = "31386-03.html";
+								}
+								break;
+							}
+						}
+						break;
+					}
+					case BOX:
+					{
+						switch (st.getCond())
+						{
+							case 9:
+							{
+								if (hasQuestItems(talker, KEY))
+								{
+									htmltext = "31530-01.html";
+								}
+								break;
+							}
+							case 10:
+							{
+								if (hasQuestItems(talker, SPEAR))
+								{
+									htmltext = "31530-03.html";
+								}
+								break;
+							}
+						}
+						break;
+					}
+				}
+				break;
+			}
+			case State.COMPLETED:
+			{
+				if (npc.getId() == INNOCENTIN)
+				{
+					htmltext = getAlreadyCompletedMsg(talker);
+				}
+				else if (npc.getId() == VIOLET)
+				{
+					final QuestState qs = talker.getQuestState(Q00024_InhabitantsOfTheForestOfTheDead.class.getSimpleName());
+					if ((qs == null) || !qs.isCompleted())
+					{
+						htmltext = "31386-04.html";
+					}
+				}
+				break;
+			}
+		}
+		return htmltext;
+	}
+	
+	public static void main(String[] args)
+	{
+		new Q00023_LidiasHeart();
+	}
+}
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-02.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-02.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-02.html	(working copy)
@@ -0,0 +1,3 @@
+<html><body>Tombstone:<br>
+After a while, a white ghost appears.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31530-03.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31530-03.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31530-03.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Box:<br>
-It's empty.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-10.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-10.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-10.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Innocentin:<br>
-Really? Have you read it?<br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-12.htm">"Yes, I read it."</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31328-11.htm">"No, I haven't read it."</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-19.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-19.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31328-19.html	(working copy)
@@ -0,0 +1,6 @@
+<html><body>Innocentin:<br>
+Ah ha! Then that hairpin must belong to Lidia!<br>
+Now I remember it! She used to wear it in her hair! Sigh... She was so beautiful then...<br>
+Thank you for your help! I suppose our business is done now, but your journey continues...<br>
+I'll always be here for you if you have any questions.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-01.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-01.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-01.html	(working copy)
@@ -0,0 +1,6 @@
+<html><body>Violet:<br>
+Oh, the key? That's right! That's the key that Duke Adolph von Hellmann asked me to keep for him! That was a very long time ago! He told me that it guards the highest honor his family received from the King!<br>
+But I can't go there. I can't leave this village.<br>
+Go towards the northern part of the village. You'll find a box near the center of the Forest of the Dead. This key opens the padlock on the box.<br>
+Bring me the object you find inside the box.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-05.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-05.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31524-05.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Ghost of von Hellmann:<br>
+<font color="LEVEL">Dig under this monument for the key and take it to the von Hellmann's page.</font><br>
+He's in the hidden village in the center of the forest.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31328-21.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31328-21.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31328-21.htm	(working copy)
@@ -1,4 +0,0 @@
-<html><body>Innocentin:<br>
-I don't think your journey's over yet. Someone close to her wants to see you. He'll show you the path that leads to your
-next adventure.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-05.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-05.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31523-05.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Tombstone:<br>
+There is a tablet engraved with familiar characters.<br>
+It appears that something else has been crudely etched into the tablet.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-07.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-07.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-07.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Broken Bookshelf:<br>
+In the locker where you found the hairpin, you also find a book tied with a leather string.<br>
+<a action="bypass -h Quest Q00023_LidiasHeart 31526-07a.html">Examine the book.</a>
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31523-04.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31523-04.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31523-04.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Tombstone:<br><br>
-There is a tablet engraved with familiar characters.<br>
-<a action="bypass -h Quest 23_LidiasHeart 31523-05.htm">Dig</a><br>
-<a action="bypass -h Quest 23_LidiasHeart 31526-10.htm">Recall the ghost</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-02.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-02.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31386-02.html	(working copy)
@@ -0,0 +1,5 @@
+<html><body>Violet:<br>
+I can't go there. I can't leave this village!<br>
+Go towards the northern part of the village, you'll find a box near the center of the Forest of the Dead. This key opens the padlock on the box.<br>
+Bring me the object you find inside the box.
+</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31523-01.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31523-01.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31523-01.htm	(working copy)
@@ -1,5 +0,0 @@
-<html><body>Tombstone:<br><br>
-<font color="LEVEL">One jeweled scepter for the King and two Silver Spears for the von Hellmann family who protects
-him.</font><br>
-<a action="bypass -h Quest 23_LidiasHeart 31523-02.htm">Wait a while.</a>
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/23_LidiasHeart/31526-13.htm
===================================================================
--- dist/game/data/scripts/quests/23_LidiasHeart/31526-13.htm	(revision 9906)
+++ dist/game/data/scripts/quests/23_LidiasHeart/31526-13.htm	(working copy)
@@ -1,3 +0,0 @@
-<html><body>Broken Bookshelf:<br>
-The locker is empty.
-</body></html>
\ No newline at end of file
Index: dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-06.html
===================================================================
--- dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-06.html	(revision 0)
+++ dist/game/data/scripts/quests/Q00023_LidiasHeart/31526-06.html	(working copy)
@@ -0,0 +1,4 @@
+<html><body>Broken Bookshelf:<br>
+You took the hairpin.<br>
+Check the bookshelf. You may find something else.
+</body></html>
\ No newline at end of file
